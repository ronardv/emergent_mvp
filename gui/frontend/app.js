async function get(u){const r=await fetch(u);return r.ok?r.json():null}async function refresh(){const s=await get('/api/status'),p=await get('/api/progress'),ph=await get('/api/phases'),l=await get('/api/log');document.getElementById('currentStage').textContent=s?.stage||'НЕТ ДАННЫХ';document.getElementById('progressBar').style.width=p?p.percent+'%':'0%';const list=document.getElementById('phases');list.innerHTML='';if(ph){for(const k in ph){const li=document.createElement('li');li.textContent=k+' — '+ph[k]+'%';list.appendChild(li)}}else{list.innerHTML='<li>НЕТ ДАННЫХ</li>'}document.getElementById('logOutput').textContent=l?l.lines.join('\n'):'НЕТ ДАННЫХ'}setInterval(refresh,1000)
